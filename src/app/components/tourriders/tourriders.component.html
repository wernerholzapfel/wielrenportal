<div fxLayout="colum">
  <div fxFlex="20%">
    <mat-card class="participant_team_card">
      <mat-card-header>Mijn Team</mat-card-header>
      <mat-card-content>
        <mat-list>
          <mat-divider></mat-divider>
          <h3 matSubheader>Mijn Renners ({{participantRiders?.riders?.length}}/{{maxParticipantRiders}})</h3>
          <mat-list-item *ngFor="let rider of participantRiders?.riders">
            {{rider?.firstName}} {{rider?.surNameShort}} {{rider?.waarde}}
          </mat-list-item>
          <mat-divider></mat-divider>
          <h3 matSubheader>Mijn waterdrager</h3>
          <mat-list-item>
            {{participantRiders?.waterdrager?.firstName}}
            {{participantRiders?.waterdrager?.surNameShort}}
            {{participantRiders?.waterdrager?.waarde}}

          </mat-list-item>
          <mat-divider></mat-divider>
          <h3 matSubheader>Mijn meesterknecht</h3>
          <mat-list-item>
            {{participantRiders?.meesterknecht?.firstName}}
            {{participantRiders?.meesterknecht?.surNameShort}}
            {{participantRiders?.meesterknecht?.waarde}}
          </mat-list-item>
          <mat-divider></mat-divider>
          <h3 matSubheader>Mijn linkebal</h3>
          <mat-list-item>
            {{participantRiders?.linkebal?.firstName}}
            {{participantRiders?.linkebal?.surNameShort}}
            {{participantRiders?.linkebal?.waarde}}
          </mat-list-item>
          <mat-divider></mat-divider>
          <h3 matSubheader>Mijn beschermde renner</h3>
          <mat-list-item>
            {{participantRiders?.beschermdeRenner?.firstName}}
            {{participantRiders?.beschermdeRenner?.surNameShort}}
            {{participantRiders?.beschermdeRenner?.waarde}}
          </mat-list-item>
        </mat-list>
      </mat-card-content>
      <mat-card-actions>
        <div fxLayout="column" fxLayoutAlign=" stretch">
          <button mat-raised-button color="primary" [disabled]="!participantRidersComplete()">Bevestigen</button>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>

  <div fxLayout="row, wrap" fxLayoutAlign="start stretch" fxFlex="80%">
    <mat-card class="team_card" fxFlex="calc(50% - 20px)" *ngFor='let team of (tour$ | async)?.teams'>
      <mat-card-header>{{team.teamName}}</mat-card-header>
      <mat-card-content>
        <mat-list>
          <mat-list-item *ngFor="let rider of team.tourRiders">
            <div matLine>
              {{rider.rider.firstNameShort}} {{rider.rider.surNameShort}} {{rider.waarde}}
            </div>
            <button mat-icon-button [matMenuTriggerFor]="menu"
                    *ngIf="!rider.rider.isSelected && !participantRidersComplete()"
                    (click)="setCurrentRider(rider, team, $event)">
              <mat-icon matListIcon>playlist_add</mat-icon>
            </button>
            <button mat-icon-button *ngIf="rider.rider.isSelected">
              <mat-icon matListIcon>directions_bike</mat-icon>
            </button>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>
</div>


<mat-menu #menu="matMenu">
  <mat-list>
    <mat-list-item>
      Kies als:
    </mat-list-item>
  </mat-list>
  <div fxLayout="column" fxLayoutAlign="start stretch">
    <button *ngIf="participantRiders?.riders.length < maxParticipantRiders" mat-menu-item (click)="addRenner()">
      <mat-icon matListIcon>add_box</mat-icon>
      Renner
    </button>
    <button *ngIf="!participantRiders?.beschermdeRenner && showBeschermdeRennerOfMeesterknecht()" mat-menu-item
            (click)="addBeschermdeRenner()">
      <mat-icon matListIcon>add_box</mat-icon>
      Beschermde renner
    </button>
    <button *ngIf="!participantRiders?.meesterknecht && showBeschermdeRennerOfMeesterknecht()" mat-menu-item
            (click)="addMeesterknecht()">
      <mat-icon matListIcon>add_box</mat-icon>
      Meesterknecht
    </button>
    <button *ngIf="!participantRiders?.linkebal" mat-menu-item (click)="addLinkebal()">
      <mat-icon matListIcon>add_box</mat-icon>
      Linkebal
    </button>
    <button *ngIf="!participantRiders?.waterdrager && currentRider?.waarde === laagsteWaardegroep" mat-menu-item
            (click)="addWaterdrager()">
      <mat-icon matListIcon>add_box</mat-icon>
      Waterdrager
    </button>
  </div>
</mat-menu>
